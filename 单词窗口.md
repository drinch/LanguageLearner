# 单词窗口

## 功能

查看或修改单词

- 进入单词窗口

  - 需要设置单词和模式

  - 查看模式
    - 点击返回按钮
    - 点击切换按钮切换模式
  - 编辑模式
    - 编辑单词，属性
    - 添加和删除属性
    - 点击返回按钮不保存
    - 点击切换按钮保存并切换

## 状态

非运行中

- 不可设置模式，读取单词
- 仅此时可设置单词，设置单词进入查看模式

查看模式

- 返回非运行中模式
- 切换编辑模式

编辑模式

- 返回非运行中模式
- 切换查看模式

## 界面

最上方固定高度菜单栏，左居中分别是返回和编辑或保存

下方滚动窗口主页面，宽度与主窗口一致，高度可变，主页面显示若干行，第一行为单词，下面分三列为属性，分别是属性名，属性值，删除按钮，最下面一行左侧为属性名，右侧两列合并为添加属性按钮

显示模式不显示最下面一行及最右侧一列，且各属性不可编辑，点击返回按钮即返回，删除此处存储的单词，点击编辑按钮切换到编辑模式

编辑模式完全显示，已存在的属性名不可编辑，其余可编辑，在添加属性按钮前输入新添加的属性，点击添加属性即将此属性名固定，添加一行显示，新行属性值可编辑，点击返回按钮则不保存返回，点击保存按钮则保存并切换为显示模式

## 成员变量

- 运行中，bool

- 编辑模式，bool
- 单词，Word
- 显示窗口列表，QVector\<QLineEdit\*\>
- 按钮列表，QVector<QPushButton*>
- 删除属性列表，QVector\<QString\>

## 公有成员函数

- 构造函数

创建基本单词窗口，连接添加按钮信号到添加属性函数，连接返回按钮和切换按钮

- 查看单词（非运行中无效）

返回单词

- 设置单词（运行中无效）

赋值单词，调用设置单词界面

- 设置编辑模式（非运行中无效）

设置变量编辑模式，调用设置界面模式

## 按钮

- 返回按钮

清除界面，初始化单词，发送返回信号

- 切换按钮

若为查看模式，则切换

若为编辑模式，则保存，发送信号，并切换

## 私有成员函数

- 设置单词界面

设置基本单词界面，调用添加属性

- 设置界面模式

按照模式设置QLineEdit只读性，删除按钮可见性和最后一行可见性

- 删除单词界面

删除属性等控件

- 添加属性（属性名，属性值）

按照名，值添加属性，连接删除按钮信号到删除属性函数

- 删除属性（属性编号）

删除属性相应控件，记录删除项目

## 信号

- 保存（原单词字符串）

令主窗口添加或更改单词
